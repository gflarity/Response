//load the config
var config = JSON.parse( fs.readFileSync( require.resolve('./config.json') ) );

//our plugin
module.exports = function( graphite_emitter, dispatch_emitter ) {
    
    //we only care about the dispatch emitter
    var on_subscribed_event = function( context ) {
        
        var from = context.from || 'someone_unconventional';
        var graphite_event = context.graphite_event || {};
        
        var event_name = this.event;
        
        console.log( "OH NOES! '" + context.from + "' called '"
            + event_name +"' after seeing " + graphite_event );
        
    };
    
    config.events_of_interest.forEach( function( event ) {
        dispatch_emitter.on( event, on_subscribed_event );
    };
    
};
